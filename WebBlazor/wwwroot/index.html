<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StockCarnicer铆a</title>
    <base href="/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="WebBlazor.styles.css" rel="stylesheet" />
    <style>
        /* Estilos iniciales para la pantalla de carga */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #custom-loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #8b0000 0%, #d4a574 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.6s ease-out;
            backdrop-filter: blur(10px);
        }

            #custom-loading-screen.hidden {
                opacity: 0;
                pointer-events: none;
            }

        .custom-loading-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
            max-width: 500px;
            width: 90%;
        }

        .loading-icon {
            font-size: 6rem;
            margin-bottom: 30px;
            animation: carneRotate 3s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite, carneGlow 2s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.4));
            display: block;
        }

        .loading-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            margin: 0 0 15px 0;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.4);
            letter-spacing: 2px;
            animation: slideDown 0.6s ease-out;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        .loading-text {
            font-size: 1.6rem;
            font-weight: bold;
            color: white;
            margin-bottom: 25px;
            animation: textFade 3s ease-in-out infinite;
            letter-spacing: 1px;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
        }

        .loading-bar-container {
            width: 100%;
            max-width: 350px;
            height: 12px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4);
        }

        .loading-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.95) 0%, #d4a574 50%, rgba(255, 255, 255, 0.95) 100%);
            border-radius: 10px;
            animation: loadingBar 3s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
        }

        .loading-dots {
            display: flex;
            justify-content: center;
            gap: 14px;
            margin-bottom: 25px;
        }

        .loading-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: white;
            animation: dotBounce 1.4s infinite;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

            .loading-dot:nth-child(1) {
                animation-delay: 0s;
            }

            .loading-dot:nth-child(2) {
                animation-delay: 0.2s;
            }

            .loading-dot:nth-child(3) {
                animation-delay: 0.4s;
            }

        .loading-subtitle {
            font-size: 1.05rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 15px;
            font-style: italic;
            animation: slideDown 0.8s ease-out;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
        }

        @keyframes carneRotate {
            0% {
                transform: rotate(0deg) scale(1);
            }

            50% {
                transform: rotate(180deg) scale(1.1);
            }

            100% {
                transform: rotate(360deg) scale(1);
            }
        }

        @keyframes carneGlow {
            0%, 100% {
                filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.4));
            }

            50% {
                filter: drop-shadow(0 0 20px rgba(212, 165, 116, 0.9));
            }
        }

        @keyframes textFade {
            0%, 10% {
                opacity: 0;
            }

            20%, 80% {
                opacity: 1;
            }

            90%, 100% {
                opacity: 0;
            }
        }

        @keyframes slideDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes loadingBar {
            0% {
                width: 0%;
            }

            50% {
                width: 70%;
            }

            100% {
                width: 100%;
            }
        }

        @keyframes dotBounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.6;
            }

            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        #app {
            display: block;
        }

        @media (max-width: 768px) {
            .loading-icon {
                font-size: 4.5rem;
                margin-bottom: 20px;
            }

            .loading-title {
                font-size: 2rem;
            }

            .loading-text {
                font-size: 1.3rem;
            }

            .loading-bar-container {
                max-width: 300px;
                height: 10px;
            }

            .loading-subtitle {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .custom-loading-content {
                padding: 30px 15px;
            }

            .loading-icon {
                font-size: 3.5rem;
                margin-bottom: 15px;
            }

            .loading-title {
                font-size: 1.6rem;
                letter-spacing: 1px;
            }

            .loading-text {
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            .loading-dot {
                width: 12px;
                height: 12px;
            }

            .loading-bar-container {
                max-width: 250px;
                height: 8px;
            }
        }
    </style>
</head>

<body>
    <!-- Pantalla de carga personalizada -->
    <div id="custom-loading-screen">
        <div class="custom-loading-content">
            <div class="loading-icon">ォ</div>
            <h1 class="loading-title">StockCarnicer铆a</h1>
            <div class="loading-text">Cargando productos</div>
            <div class="loading-bar-container">
                <div class="loading-bar-fill"></div>
            </div>
            <div class="loading-dots">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
            <div class="loading-subtitle">Preparando los mejores productos...</div>
        </div>
    </div>

    <!-- Contenedor Blazor -->
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        un error ha ocurrido al procesar la pagina.
        <a href="" class="reload">Recargar</a>
        <a class="dismiss"></a>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDPyakUUz7DrOq-mKA8HrA0VecCul5dN4s",
            authDomain: "stockcarne-e9951.firebaseapp.com",
            projectId: "stockcarne-e9951",
            storageBucket: "stockcarne-e9951.firebasestorage.app",
            messagingSenderId: "820415986013",
            appId: "1:820415986013:web:fd6ed93695d46bab05d0b4"
        };
        firebase.initializeApp(firebaseConfig);
        console.log(firebase);

        window.firebaseAuth = {
            signInWithEmailPassword: async function (email, password, rememberPassword) {
                try {
                    if (rememberPassword) {
                        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);
                    } else {
                        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);
                    }
                    const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                    console.log(userCredential);
                    return userCredential.user;
                } catch (error) {
                    console.error("Error en autenticaci贸n:", error.message);
                    return null;
                }
            },
            createUserWithEmailAndPassword: async function (email, password, displayName) {
                try {
                    console.log(`email${email} password=${password},name=${displayName}`)
                    const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                    const user = userCredential.user;
                    user.updateProfile({
                        displayName: displayName
                    });
                    user.sendEmailVerification()
                    return userCredential.user.uid;
                } catch (error) {
                    console.error("Error en autenticaci贸n:", error.message);
                    return null;
                }
            },
            signOut: async function () {
                await firebase.auth().signOut();
            },
            getUserFirebase: async function () {
                return new Promise((resolve, reject) => {
                    firebase.auth().onAuthStateChanged((user) => {
                        if (user) {
                            provider = user.providerData[0].providerId;
                            console.log(provider);
                            if (provider == "facebook.com" || provider == "google.com") {
                                user._delegate.emailVerified = true;
                            }
                            resolve(user);
                        } else {
                            resolve(null);
                        }
                    });
                });
            },
            loginWithGoogle: async function () {
                var provider = new firebase.auth.GoogleAuthProvider();
                try {
                    const result = await firebase.auth().signInWithPopup(provider);
                    return result.user;
                } catch (error) {
                    console.error("Error durante el inicio de sesi贸n:", error.code, error.message);
                    return null;
                }
            }
        };

        // Script para ocultar la pantalla de carga cuando Blazor est茅 listo
        window.hideCustomLoadingScreen = function () {
            const loadingScreen = document.getElementById('custom-loading-screen');
            if (loadingScreen) {
                // Agregar la clase 'hidden' para activar la transici贸n
                loadingScreen.classList.add('hidden');
                // Despu茅s de la transici贸n, establecer display: none
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 600);
            }
        };
    </script>

    <script src="_content/CurrieTechnologies.Razor.SweetAlert2/sweetAlert2.min.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
</body>

</html>